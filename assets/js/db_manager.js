$(function(){function e(e){var a=$(".row_field:first").clone(!0);a.show(),a.find(".chosen").chosen({width:"100%"}),a.insertAfter(".row_field:last"),a.iCheck({checkboxClass:"icheckbox_square-blue"})}function a(e){$(this).parents("tr").remove()}function t(e){var a=$(this),t=a.parent().next();t.val(e.data.val)}function i(e){function a(){$.ajax({url:site+"/myigniter/delete_table",type:"POST",dataType:"json",data:{table_name:i.data("name")}}).done(function(){i.parent().parent().fadeOut("fast")}).fail(function(){console.log("error")})}e.preventDefault();var t,i=$(this);t='<i class="fa fa-warning fa-1x text-danger"></i>  Are you sure you need to delete <b class="text-danger">'+i.data("name")+"</b> table ?",t+='<p class="text-danger"><small>Please be sure that you not using this table in other places before delete</small></p>',alertify.confirm(t,a)}function n(e){e.preventDefault();var a=($(this),$("#creatTblForm"));$.ajax({url:site+"/myigniter/add_table",type:"POST",data:a.serialize()}).done(function(e){"1"===e.state?(alertify.notify(e.message,"success",1,function(){location.reload()}),$("#formCreateTable").modal("hide")):alertify.error(e.message)}).fail(function(){})}function l(e){e.preventDefault();var a=$(this);alertify.defaults.glossary.ok="Generate Migrate File";var t='<label><input class="check" type="checkbox" id="migrateData" value="1" /> Also migrate this table data.</label>';alertify.confirm("Confirm",t,function(){$.ajax({url:site+"/myigniter/generate_migration_file",type:"POST",dataType:"json",data:{table_name:a.data("name"),migrate_data:$("#migrateData:checked").length}}).done(function(e){alertify.success("Migration Generator successfully generate class for table "+e.table_name+" in this path application/migrations")}).fail(function(){console.log("error")})},function(){}),$(".check").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue"})}$(".chosen-container").css({width:"100%"}),$(".check").iCheck({checkboxClass:"icheckbox_square-blue"}),$(".delete_table").click(i),$("#createTableBtn").click(n),$("#add-filed-row").click(e),$(".delete-field").click(a),$(".migrateTable").click(l),$("body").on("ifChecked",".check",{val:1},t),$("body").on("ifUnchecked",".check",{val:0},t)});